# SSE接口服务

sse接口一般分为两种形式.

+ 一种是服务启动后就会自动推送的,比如订阅时钟.
+ 一种是需要创建后才会推送的,我们的例子聊天室就是后一种的应用.

第一种我们只需要定义一个GET方法的接口,用户请求后一直给他推送数据即可

第二种我们一般提供3个接口:

1. 创建接口,用于创建一个流按逻辑推送数据到一个发布订阅器
2. 单独监听接口,用于给用户推送创建的流里的内容
3. [可选]公频监听接口,用于将所有创建出来的流推送给请求了这个接口的用户

无论是哪一种,我们的sse接口都需要一个发布订阅器用于广播消息给订阅的用户.


## 发布订阅器

我们发布订阅器的要求是可以广播消息,单机条件下可以用

`gin.Context`自己提供了一个`c.SSEvent(name string, message interface{})`方法作为sse发送的快捷方式,但很明显虽然够用,但实际上是不完整的.

相对完整的方法是使用包`"github.com/gin-contrib/sse"`,用`c.Render(-1, sse.Event)`替代上面的方法发送消息.