# 代码风格控制

Go语言很可能是第一个将代码风格强制统一的语言.一些对于其他语言的编译器完全忽视的问题在Go编译器前就会被认为是编译错误,比如如果花括号新起了一行摆放你就会看到一个醒目的编译错误.这一点会让很多人觉得不可思议.无论喜欢还是讨厌,与其他那些单单编码规范就能写出一本书的语言相比,毫无疑问Go语言的这种做法简化了问题.

个人认为Go的设计者相当现实主义,使用了如此激进的方式强制风格一致,这是为大规模项目提高可维护性的重要特性.


## 强制性代码规范

### 命名

命名规则涉及变量,常量,全局函数,结构体,接口,方法等. Go语言从语法层面进行了以下限定:

> 任何需要对外暴露的名字必须以大写字母开头,不需要对外暴露的则应该以小写字母开头.

软件开发行业最流行的两种命名法分别为骆驼命名法(类似于DoSomething和doSomething)和下划线法(对应为do_something),而Go语言明确宣告了拥护骆驼命名法而排斥下划线法.骆驼命名法在Java和C#中得到官方的支持和推荐,而下划线命名法则主要用在C语言的世界里,比如Linux内核和驱动开发上.在开始Go语言编程时还是忘记下划线法吧.

#### 包命名

保持package的名字和目录保持一致,尽量采取有意义的包名.简短,有意义,尽量和标准库不要冲突.包名应该为小写单词,不要使用下划线或者混合大小写.

#### 文件命名

尽量采取有意义的文件名,简短,有意义,应该为小写单词,使用下划线分隔各个单词.

#### 结构体命名

采用驼峰命名法.首字母根据访问控制大写或者小写.

#### 接口命名

命名规则基本和上面的结构体类型,单个函数的接口名以`er`作为后缀

#### 变量命名

和结构体类似,变量名称一般遵循驼峰法,首字母根据访问控制原则大写或者小写,但遇到特有名词时,需要遵循以下规则:

+ 如果变量为私有,且特有名词为首个单词,则使用小写,如`apiClient`
+ 其它情况都应当使用该名词原有的写法,如`APIClient`,`repoID`,`UserID`
+ 错误示例:`UrlArray`,应该写成`urlArray`或者`URLArray`

若变量类型为 bool 类型，则名称应以 Has, Is, Can 或 Allow 开头

#### 常量命名

常量均需使用全部大写字母组成,并使用下划线分词

### 排列

Go语言甚至对代码的排列方式也进行了语法级别的检查,

> 约定了代码块中花括号开口需要在行尾.

Go语言的这条规则基本上就保证了所有Go代码的逻辑结构写法是完全一致的,也不会再出现有洁癖的程序员在维护别人代码之前非要把所有花括号的位置都调整一遍的问题.

### 注释

注释起到程序文档的作用,由两种形式：

1.行注释为 `//`

1. 通用注释为 `/**/`

注释不能嵌套在 Rune 或者字符串字面量里,也不能嵌套在其他注释里.不包含新行的通用注释就如同一个空格.其他任何注释就像一个换行符.

go的注释和python的docstring类似,也是用于接口描述的工具,因此最好有详细描述,但因为是静态语言,所以其实并不太需要标明参数信息

### 关键字

下列关键字是保留的不能用作标识符:

```shell
break      default       func     interface   select
case       defer         go       map         struct
chan       else          goto     package     switch
const      fallthrough   if       range       type
continue   for           import   return      var
```

### 使用`gofmt`规范风格

go语言自带的gofmt可以自动检测项目中代码的样式是否符合规范,不符合就会将其重新排版.

### 使用godoc查看代码文档

前文已经说过go的注释会自动生成文档,要读取这些文档我们需要借助`godoc`

使用`godoc -http=:6060`后我们就可以查看标准库和你环境中`GOPATH`下的包的文档
